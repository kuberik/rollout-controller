# Changelog

All notable changes to this project will be documented in this file.

The format is based on [Keep a Changelog](https://keepachangelog.com/en/1.0.0/),
and this project adheres to [Semantic Versioning](https://semver.org/spec/v2.0.0.html).
## [0.6.0] - 2026-01-07

### Added

- Add TriggeredBy field to deployment history entries (#36)

- Add retention policy for available releases cleanup (#37)


### Fixed

- Don't omit empty allowed versions in gate summary

- Use --latest instead of --current for release changelog generation

## [0.5.0] - 2025-11-23

### Added

- Block deployments when health checks are unhealthy (#25)

- Improve bake status handling and error detection (#28)


### Chore

- Add Apache License 2.0

- Remove redundant DeployTime field from history entries (#30)

- Remove deprecated MinBakeTime and MaxBakeTime fields

- Release version v0.5.0


### Fix

- Populate release candidates when rollout is in progress (#33)


### Fixed

- Correct HealthCheck controller architecture (#23)

- Remove controller coupling between KustomizationHealth and HealthCheck controllers (#24)

## [0.4.0] - 2025-09-17

### Added

- Enhance version info with OCI annotations (#21)

- Implement sophisticated HealthCheck-Rollout association logic (#22)

- Add Kustomization watching to KustomizationHealth controller

- Add ArtifactType and Source fields to RolloutStatus

- Add org.opencontainers.image.created annotation support to VersionInfo


### Chore

- Release version v0.4.0


### Fixed

- Add missing rbac to record events

- Add nil checks for event recorder to prevent panics

- Resolve time precision issues in FakeClock tests (#20)

- Remove duplicate import in kustomizationhealth_controller


### Refactored

- Extract OCI parsing logic and add fallback for version info

## [0.3.0] - 2025-09-01

### Added

- Enable bypassing gates through an annotation (#19)

- Improved healthcheck selector

- Enhance health check selector with namespace selection and flexible label matching

- Add unblock-failed annotation to allow deployment despite failed bake status

- Update kustomization annotation format to use substitute.<variable>.from pattern

- Allow wantedRelease to be set to any tag from Docker repo

- Add message field to deployment history entries

- Add Kubernetes event emission for rollout controller


### CI

- Release manifests install file


### Chore

- Deploy to kuberik-system

- Release version v0.3.0


### Fixed

- Don't check if imagepolicy is ready (#18)

- Resolve failing test for blocked deployment status updates


### Refactored

- Remove kubestatus resource and controller


### Tests

- Add comprehensive tests for enhanced HealthCheckSelector functionality

## [0.2.0] - 2025-08-12

### Added

- Reconcile flux oci repository on deployment

- Control deployment with gates (#1)

- Print additional columns for Rollout

- Add HealthCheck type

- Eveluate health checks during bake time before continuing with rollout

- Tightly integrate with flux (#3)

- Always evaluate bake status (#10)

- Kubestatus controller (#5)


### Chore

- Update the rest of project to use go 1.24

- Upgrade kustomize oci/kustomization to v1 (#4)

- Update flux kustomize dependency (#9)

- Move gate status to spec (#12)

- Display release candidates in status (#13)

- Display release candidates in status (#14)

- Update release candidates after deployment (#15)

- Release version v0.2.0


### Fixed

- Kustomization indentation

- Use SSA to patching kustomization and ocirepo (#7)

- Gate release in status even when wanted version is set (#16)

- Check also current health check status (#17)


### Refactored

- Rollout reconcile into smaller functions

- Remove secondary way to set wanted version through status

- Simplify rollout reconcile triggers (#11)


### Tests

- Bake succeeds even if last error is nil

- Healthcheck controller basic test

## [0.1.0] - 2025-04-26

### Added

- Remove constraints and upgrade to latest semver instead

- Enable manual override of the version

- Implement authentication to OCI registries

- Add a script to setup dev environment


### Chore

- Setup changelog

- Setup release workflow

- Publish docker image for each commit

- Modify image on release

- Lint

- Add github release workflow

- Integrate changelog with release workflow

- Push main also when releasing

- Release version v0.1.0


### Fixed

- Update go in Dockerfile

- Allow multiple occurances of the same version in history

- Compile linter with the same version as project


### Refactored

- Registry setup

<!-- generated by git-cliff -->
